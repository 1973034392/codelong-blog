# 数据库表结构文档

---

## 组别信息表

**注释**: 分组信息描述

| 字段名称    | 类型          | 是否非空 | 默认值    | 注释           |
| ----------- | ------------- | -------- | --------- | -------------- |
| id          | bigint        | 是       | -         | 主键id         |
| group_id    | varchar(64)   | 是       | -         | 关联分组标识id |
| detail      | varchar(1000) | 否       | -         | 分组说明       |
| create_time | datetime      | 是       | ``now()`` | 创建时间       |
| update_time | datetime      | 是       | ``now()`` | 更新时间       |

**约束与索引**:

- 主键: `PRIMARY KEY (id)`
- 唯一约束: `group_info_group_id (group_id)`

---

## 安全组信息表 
**注释**: 安全组配置信息

| 字段名称            | 类型          | 是否非空 | 默认值    | 注释           |
| ------------------- | ------------- | -------- | --------- | -------------- |
| id                  | bigint        | 是       | -         | 主键id         |
| safe_group_name     | varchar(128)  | 是       | -         | 安全组名称     |
| safe_group_id       | varchar(64)   | 是       | -         | 安全组唯一标识 |
| safe_group_password | varchar(128)  | 是       | -         | 安全组验证秘钥 |
| safe_group_key      | varchar(128)  | 是       | -         | 安全组连接秘钥 |
| detail              | varchar(1000) | 否       | -         | 安全组描述     |
| status              | int           | 是       | 0         | 是否启用       |
| create_time         | datetime      | 是       | ``now()`` | 创建时间       |
| update_time         | datetime      | 是       | ``now()`` | 更新时间       |

**约束与索引**:
- 主键: `PRIMARY KEY (id)`
- 唯一约束: `safe_group_safe_group_id (safe_group_id)`

---

## 应用服务分组表
**注释**: 应用服务分组关系

| 字段名称    | 类型        | 是否非空 | 默认值    | 注释         |
| ----------- | ----------- | -------- | --------- | ------------ |
| id          | bigint      | 是       | -         | 主键id       |
| service_id  | varchar(64) | 否       | -         | 服务唯一标识 |
| group_id    | varchar(64) | 是       | -         | 分组id       |
| create_time | datetime    | 是       | ``now()`` | 创建时间     |
| update_time | datetime    | 是       | ``now()`` | 更新时间     |

**约束与索引**:
- 主键: `PRIMARY KEY (id)`
- 唯一约束: 
  - `service_group_group_id (group_id)`
  - `service_group_service_name (service_id)`
- 索引: `service_group_group_id_index (group_id)`

---

## 应用服务注册表 
**注释**: 应用服务实例信息

| 字段名称        | 类型         | 是否非空 | 默认值    | 注释         |
| --------------- | ------------ | -------- | --------- | ------------ |
| id              | bigint       | 是       | -         | 主键id       |
| service_id      | varchar(64)  | 否       | -         | 服务唯一标识 |
| service_name    | varchar(128) | 是       | -         | 服务名称     |
| service_address | varchar(64)  | 是       | -         | 服务地址     |
| status          | int          | 是       | 0         | 启用状态     |
| create_time     | datetime     | 是       | ``now()`` | 创建时间     |
| update_time     | datetime     | 是       | ``now()`` | 更新时间     |

**约束与索引**:
- 主键: `PRIMARY KEY (id)`
- 唯一约束: `service_group_detail_service_id (service_id)

---

## 网关服务分组表

**注释**: 网关服务分组信息

| 字段名称    | 类型        | 是否非空 | 默认值    | 注释         |
| ----------- | ----------- | -------- | --------- | ------------ |
| id          | bigint      | 是       | -         | 主键id       |
| group_id    | varchar(64) | 是       | -         | 分组id       |
| service_id  | varchar(64) | 否       | -         | 服务唯一标识 |
| create_time | datetime    | 是       | ``now()`` | 创建时间     |
| update_time | datetime    | 是       | ``now()`` | 更新时间     |

**约束与索引**:

- 主键: `PRIMARY KEY (id)`
- 唯一约束: 
  - `gateway_group_group_id (group_id)`
  - `gateway_group_service_name (service_id)`

---

## 网关实例信息表

**注释**: 网关实例详细信息

| 字段名称        | 类型         | 是否非空 | 默认值              | 注释         |
| --------------- | ------------ | -------- | ------------------- | ------------ |
| id              | bigint       | 是       | -                   | 主键id       |
| gateway_name    | varchar(128) | 是       | -                   | 网关名称     |
| gateway_address | varchar(64)  | 是       | -                   | 网关地址     |
| weight          | int          | 是       | 1                   | 分配权重     |
| status          | int          | 是       | 0                   | 启用状态     |
| service_id      | varchar(64)  | 是       | -                   | 服务唯一标识 |
| create_time     | datetime     | 是       | `CURRENT_TIMESTAMP` | 创建时间     |
| update_time     | datetime     | 是       | `CURRENT_TIMESTAMP` | 更新时间     |

**约束与索引**:

- 主键: `PRIMARY KEY (id)`
- 唯一约束: `service_group_detail_service_id (service_id)`

---

## 接口信息表 

**注释**: 存储接口基本信息

| 字段名称       | 类型         | 是否非空 | 默认值  | 注释         |
| -------------- | ------------ | -------- | ------- | ------------ |
| id             | bigint       | 是       | -       | 主键id       |
| service_id     | varchar(64)  | 是       | -       | 服务唯一标识 |
| group_id       | varchar(64)  | 是       | -       | 分组唯一标识 |
| interface_id   | varchar(64)  | 是       | -       | 接口唯一标识 |
| interface_name | varchar(128) | 是       | -       | 接口名称     |
| create_time    | datetime     | 是       | `now()` | 创建时间     |
| update_time    | datetime     | 是       | `now()` | 更新时间     |

**约束与索引**:

- 主键: `PRIMARY KEY (id)`
- 唯一约束: `api_interface_interface_id (interface_id)`

---

## 方法信息表 

**注释**: 存储接口方法详细信息

| 字段名称       | 类型         | 是否非空 | 默认值    | 注释           |
| -------------- | ------------ | -------- | --------- | -------------- |
| id             | bigint       | 是       | -         | 主键id         |
| safe_group_id  | varchar(64)  | 否       | -         | 安全组唯一标识 |
| interface_id   | varchar(64)  | 是       | -         | 接口唯一标识   |
| method_name    | varchar(128) | 是       | -         | 方法名称       |
| parameter_type | varchar(256) | 是       | -         | 参数类型       |
| url            | varchar(128) | 是       | -         | 方法请求路径   |
| auth           | int          | 是       | 0         | 是否鉴权       |
| method_id      | varchar(64)  | 是       | -         | 方法唯一标识   |
| is_http        | int          | 是       | -         | 是否是HTTP请求 |
| http_type      | varchar(32)  | 否       | -         | HTTP请求类型   |
| create_time    | datetime     | 是       | `now()`   | 创建时间       |
| update_time    | datetime     | 是       | ``now()`` | 更新时间       |

**约束与索引**:

- 主键: `PRIMARY KEY (id)`
- 唯一约束: `api_method_method_id (method_id)`
- 索引:
  - `api_method_id_name_index (interface_id, method_name)`
  - `api_method_interface_id_index (interface_id)`
  - `api_method_safe_group_id_index (safe_group_id)`
  - `api_method_url_index (url)`

---

**文档说明**：

1. 所有时间字段（`create_time`/`update_time`）均自动维护
2. 带默认值字段：
   - `auth` 字段默认值为 `0`（否）
   - `status` 字段默认值为 `0`（停用/未启用）
3. 唯一标识字段（如 `interface_id`/`method_id`）使用分布式组件生成
4. HTTP类型字段（`http_type`）建议存储大写值（如 GET/POST）