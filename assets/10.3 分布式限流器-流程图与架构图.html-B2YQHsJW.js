import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as l,a as i,b as e,e as s,r as t,o as p}from"./app-CUF72b0_.js";const r={};function o(h,a){const n=t("Mermaid");return p(),l("div",null,[a[0]||(a[0]=i('<h1 id="分布式限流器-流程图与架构图" tabindex="-1"><a class="header-anchor" href="#分布式限流器-流程图与架构图"><span>分布式限流器 - 流程图与架构图</span></a></h1><h2 id="一、流程图" tabindex="-1"><a class="header-anchor" href="#一、流程图"><span>一、流程图</span></a></h2><h3 id="_5-1-限流判断总流程" tabindex="-1"><a class="header-anchor" href="#_5-1-限流判断总流程"><span>5.1 限流判断总流程</span></a></h3><h4 id="distributed-模式-默认" tabindex="-1"><a class="header-anchor" href="#distributed-模式-默认"><span>DISTRIBUTED 模式（默认）</span></a></h4>',4)),e(n,{code:"eJxLy8kvT85ILCpRCHHhUgCC4BIgRyP6xfrtzzY2Pe3Y8GLfvlhNBV1dOwXnjNTkbNe8xKSc1JTql629z/euezZj/dMJy55OWP98ygr7WrB+ZFUgbTVABTUKjjlAezSin7Y2vli342XDrBf722M1sasHmlmjEJSaklnsk5mbWRINZj7taHu6o/npnv6XMyc829pok1Skb/ds98SnXSuer5r+tH+x/pPdS5539jxbuC2WC2wswgCw28Fc16Ki/KJqiHl7mp7u2AF1MkIS4QCX1PSixJTU6Jcze5/vWv587bTnU5dCbJ2y78XCHkjwxGLTDvYvWCwgsbi4GuJgiJeB9iF0gGSRNWSlJgPD/Vn3pOe750KNh4QQqmqw68DBCTEL6lCwL5GEi0sqc1IhkamQlpmTY6WcaphmmpaGJAlWDZVMtkg1S7ZEkoS4ByqblpackmKEJAuzFCadZplswgUA1KTyjw=="}),a[1]||(a[1]=s("h4",{id:"local-distributed-模式-高性能",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#local-distributed-模式-高性能"},[s("span",null,"LOCAL_DISTRIBUTED 模式（高性能）")])],-1)),e(n,{code:"eJxtUk1LAlEU3fsrBtrowkVRkS2KMqlFK203zGJ68watyYGZiQgNLBC1D5WoqDAk+sBFjAaRiWR/xvfm+S8a35tpXtHbXc655557z1M1fQ+kZcMSNlZCgvtSlluERdLu4tcjVO6QwUCKCNHoghBPQ7CdyMqbGlRyo+KZ82nj6zaqP6N627loLR7Qfp41bsu7hLywpLlzwiIqHhL7Y1S4JV8lKfI/39XMC+s6kDUKifihgJtPuPGCGp1h/9GpnBL7Hl920E1LClGJgEx90nJNNnOsBzcqrM0z6MPBsLieNXd3oIjfy+Stx8gSM8cQKktX4Ab6EnS/ZdkC6VVoicN+NQmVjIkrvVGpRqpdVLviFX0ilaRFwjB0I8eYuFxHx03PaIAGc5JwCwI3Hnxy7vTvWEjeIf/Q6WYpaFGvIrEH47joQbjz0cA9DsuYLczWNK19DbIPIagZTZufgJPqjKpyID2KB4I5OAtiHMjMeqiqAkWZ4lAuNZ+hxsA0x/i51S/8G0FGHbU="}),a[2]||(a[2]=s("h3",{id:"_5-2-请求处理链中的限流流程",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_5-2-请求处理链中的限流流程"},[s("span",null,"5.2 请求处理链中的限流流程")])],-1)),e(n,{code:"eJx1lMtq20AUhvd5ioFumkXc2nVLXUpKoaUxdCFc74QXijxDVFTLHY17dcG941KngmbRNDeCkzirhEBCIBDyNDOW3yL2jDSasWQtz/+f/3xHmhFyvbf2ioUJqD6ZA+OnAl+3oE9umkvVqhEen7OTL7V5sLCwCAwL+9AMB322HUQC7+B17njcIivmqHvKtr7SvW/D4AddP3y4jG8tTgQPOx8s4niNJatRdyGuzfHuiSSbDcv3P4qAUed/ePXz0SdpmmgTY5sGB21eqcCX0B6ThldrdGO7eDtfm0+72b/jNqhYBD53XjnEHK0H7OyzTidVnUyWOd4z11u2XBGSzwH6/ZCedEQa63fYzr54GYpNaRN7qRsl9WQnOXBqsUKJY6ojx5tmxfBlX0D8xrGjfQs5wDZ79Nfu8GKQplWtHDcqpHkVIQGOitm4YqyOO53CecsNAjGyYuI7Y+LVffqnn0msmzmzLKWpNSnhluUZ5Hy8Tp5OEuxNAV3MgbKRDSwcgrSZgchrClszG6psTAElfZzEwPDpO2i3iIdN2u0NL4/0Q67o8pjz25vUOaMMYd1BuPs7bs/s1RoNzycJQbCaJlAMOoIi8KgK9Jtew4fxO6B/e/RiLd7cJ+9dGP+nAHJc98ENmEd3EVJleXmFASFUsotav5gR6fZ9eM8uZQWIzyFj7Hq9oNi0KzDLNHXeZtqiTz9LT/55uuMawF5QZw=="}),a[3]||(a[3]=s("h3",{id:"_5-3-令牌桶算法执行流程-distributed-模式",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_5-3-令牌桶算法执行流程-distributed-模式"},[s("span",null,"5.3 令牌桶算法执行流程（DISTRIBUTED 模式）")])],-1)),e(n,{code:"eJxdUdtKAkEYvu8pBrpJQsqoSBEjzESCCPUiEAkbZ3FzPTBOtKJBRVERHeigHQ1vpItQg8hI1KeZdX2Ldmd2bWvuZr7jP78gZbZhIoYJCC+OAO2EiHYZi6iNlvK+T4+barcbtQG73QP8iCyjfESpHND2dxDFxRzQ7u4NPOHBMYLWJTElEpcsy1FmxOmm0ruFMUqTiHreohcl2rmmJ2dqvarcNpmB3xcGSZSPjphSg8/k3kwqG8OoAI03N2BR8zuMbKA6s0gva0UQRJsI6iP0buhjZZL5K6dX/fYzHypq4ylWoXLXKIJAGuIIL0XvX8cdTBlY8QZ5NV2jU3inBILJJRHnSGFQKylvVa7TOnHvIfxrH0LEJ2dFjLSMbr9TV3tHytOLUv4clD9YlG9tNRD06WHAweP+2bDxFiRtZeZ0vCM93FPrX4PdB83SnG6YxuoyEQdyJC8hvmYgiJLkGkUOYUYQLCBjGyCcQ7PQaQH59xqoIMB4fMqCGls3UcEJpy0o+74/2A/h//fC"}),a[4]||(a[4]=s("h3",{id:"_5-4-滑动窗口算法执行流程-distributed-模式",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_5-4-滑动窗口算法执行流程-distributed-模式"},[s("span",null,"5.4 滑动窗口算法执行流程（DISTRIBUTED 模式）")])],-1)),e(n,{code:"eJxVkl1L21AYx+/9FAd2MzfK2rGNKeLI2iBj7IV0F9tCGd3JE5YtbV16urasgym+iyi+UN9fUBS8iApqxWL9NOck/Ram5yQmzU1Inuf/e/7n/xzdLJTxj6xF0KdUD/KeNPE+HqruSYOdjdKpU7fVyvSiWGwQDQF5C1WVbY/R5rUCmlFE3vfAd+vJoJUl8M00cgbpr1QqGQ4S7VyZzJpYrgwbFqiuvefYdee4Tuf33YsGPZpl9ct2/ZxjcMmyIE9QDJWNvFYoP0rE4/FMD8eFDI5UIFf4A+KHptKp3fbagXs7yTZ32Mopm7M576siv1Ok90Py6y/p5AdFFsa6pMJfoZQnSTFcdZo7HZPcIZ0YF0F4UEFMSkoK/YJq4Cqi9FG54awFf3GngAYQD+XVP7+Z1zp9NbpwWPOc/ATcCft2mW5sx/kENrvoNLfE1ExvMCUUstWTGpI0TYHfJSgSlTWadGaX3izR6TmhEkalFPeJgkz9t4gg1HPTaSD362k5N7YfZLgY+fPHN4rMeWIzjxN+APdSDpJM7zoF50lwKR0fce2r9v91Dxqcp0iqJoibhnTDNPsfQEJ/ruuRIif5RfwSXuC+SFHk5ld1HWva065qdL9Bk96Hn0X5YQJdHXeVCjnU"}),a[5]||(a[5]=s("h3",{id:"_5-5-批量获取令牌流程-local-distributed-模式",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_5-5-批量获取令牌流程-local-distributed-模式"},[s("span",null,"5.5 批量获取令牌流程（LOCAL_DISTRIBUTED 模式）")])],-1)),e(n,{code:"eJxlUltLAkEYfe9XDAWRkHShohtFmYUEEdZDsUis42xOrRbjVFr2EkEXukEXo8IuRPQQWhAJifpnmt31X7TO7G4rzdvM+c75zpzvU9SVDRiVCQWzYw3APDPUvLRIRr6gfeyw/XejXA55gNc7BCYQnUQpScvusuJ3EEVwApj3wTBpGyIyRQsqjmHan0wmQ1xIlNtM3xohKE4l46TATq9Y6ZwdHBu5R+3ynQtM+GfBMkqFGmyqVc/pPlmFI+syVuWwiqRGk6bnMuw0r1+8/hSf9YMjWyWG4y1hmcLoQgJvolbAHXmhkPI0Cl91akJ/JbYqE7QlO6/Ni3QAtA9vCzsWXqtNs7OXNAiiJQRrIVUu2G22nffWMg9uSyHPf652nU+DQByS0ZTEnrLs8MGVQGDKFxydr4UAHB/CsGAIp1EEl8cxSdCt6suV9vYoBByjDvzXbwZRf3IVEyQZubJeyhmVPe3uXst8VTOfvLF/bjoQ9PPGHVZC9TL8yyOquSj2jx2DXEC8icHqN7vOSOwIHAf8C1xIAAmaMrPmCwcUrKr9TahD6VYUF8irLRD2oh7Y5wLFGCxUUWAk0ulCrf2zUaUPdrlQK9Q69BdhODXp"}),a[6]||(a[6]=s("h3",{id:"_5-6-配置更新流程",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_5-6-配置更新流程"},[s("span",null,"5.6 配置更新流程")])],-1)),e(n,{code:"eJyNk0FLAkEYhu/9ioUuFSyxuxUl4aGMrpF1WkTWdScXNg1dE48qgkSmooaS0SWhQ5pQiUXin3Fm8180zLemopl72/me5513dlhkhGJqQAmb3IlriaOP26QvK7LVLeD0a7/TwL3Uri+87hyks1a3iXMVcvfmWeV43sm5lUvNtSf3e/e4UcGZFim3SLaJP4seSGJjIONB9Vjz6xEZ569Jo05h9sqSw4qpeQ39XDe9aiiI9DPHmmcJEoYaCzmK+gw9EpBxroA7KdLOkMTLbwDPAngI4KMXfrpmp9geyzikyzElLtjn+75KWskPgaWQmzoptSEWDjBDFCdEcXFRmhClGSIzh/2YespOIcj0i5PbFqk941oLrgG2GXYag8X/YGkMlmbCjLa3ZvC+oSlh2qKTHlQfbbaaJ+8JXH2yvor07mEHu8HIoWUWc6AUc2ineQ6ToBBzDhDSVFNYkaG9VXog5YxndYRBHcDEvzFoAJg0hTEuYsYNDX4PDumG4VjWBLSJ0NhweO8wRgjtqBtjY7usPVa3tS11Z2oszh9Lk+MfUGaZ/g=="}),a[7]||(a[7]=s("h2",{id:"二、架构图",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#二、架构图"},[s("span",null,"二、架构图")])],-1)),a[8]||(a[8]=s("h3",{id:"_6-1-系统整体架构",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_6-1-系统整体架构"},[s("span",null,"6.1 系统整体架构")])],-1)),e(n,{code:"eJyllMtKw0AUhvc+RdGNCok0UUERFyroooK3XRBJ20QDMUqbIAU3XipuxBZRK1W84MKFxoIXiqC+jDMxb2E6J5nEOGjA2WXmO2e+mfnJYkFeXUrNjbSlvFG0svDd7rxWUfnho3mH3rfayVprjCqGqRQk96SCnzbc8p7zajv2pVPZmY8hYyNS52RpdjqDDxt4z0YvB11xJMVxw5Qma4qRb4tpzCh5rejWd5y369CCTI6uGKq2KIEEuquhzZuhbKFnuCCbyoKuLWvmQo4gg93hzn6lFTnFp33pOaKTePWPsikrO2tlJfy8izfu3do52j2mJRwp4WBDzlrNe3NQzjgTXC2+aHpXGz9aSI17LdbkEpcOF1tjPJ3RiqZitPzh/utVVLn1/ENd4CZkI6/TY6Lrbe+ZGFhmJSfrEj69RacNH41C1J9tJ8TshIR2QjI74X92YsxOTGgnJrMTE9h9swyDv57mP97PvNiCyHo003FU4NF+FTW3IHk+CmmEtpEJUiDyn/aVWysHBWFmkuH0EZPh9FbBJtyN4L08rj/io0ZwUBpMgOlebDjICcB0JzYcPFvg4X8SuI+PPhO5k9bjMch+Hn46Phj9ZfiNAyl2Y8gsg/y7cXAAdmOIG4P8s3HRLOlKEClV0/XBDiWt9qlqZDUSQB9RVXUg1/sTIY1/Zfy0fEO+AH3dcvY="}),a[9]||(a[9]=s("h3",{id:"_6-2-限流器内部架构",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_6-2-限流器内部架构"},[s("span",null,"6.2 限流器内部架构")])],-1)),a[10]||(a[10]=s("h4",{id:"distributed-模式",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#distributed-模式"},[s("span",null,"DISTRIBUTED 模式")])],-1)),e(n,{code:"eJx9U01PE0EYvvMrNniBQzUmasQYDqCGA14qxsOmh+nuu+2k62ydnY0x6UVEooYGDF9WvTRgJMZWjXw0pfBrmJn2X7A7U9qdUHhvM8/H+7zvzhYoKhethZkxK64wyuvz+CMcMorzEQM3ixjM45eYAbX4h2Xeesc7q73amjh4y2t740qYlIspOAwHJHEb3A4te++r8qQpm3W5tjxUJTUbEA8XZpFTBLvP6qzzxpeHeXprOgadiFIgbA6FxaeonDO0z8tunE872OLbvtj6qy2GNCDuqDxZcHGo5zDjLAQlIDORUwJmnx3vyo8ron4om9vi/6ZKNB+h7tJX8f23meSZj11MCi8wcYPXtjj+zD/tyV/bfHXneu0V8Xq1qmz/lI0tufnDzPeY0oDOIeL6YPPOIm+1+O5SvFQzzhPk+3nklGxtdNZqi43Tbn3FbGwEyMKrCEI2YXf/HIl/i7lJK5OZTn8dxUqdFZ5a10jc2ItulJIoSmoihRuSSwxFSV0khIpeRGUw9kiSaOwoUhbCckBCmLD5epW3N3KTin6hVR0vOLpd+plZmZuJl3prFWM9+idib+J2/V1aHvb9BzfgtnfX8wxYu/dx5z7cc6ZS+CCKxj3Pm3LujJ0DZSdaBA=="}),a[11]||(a[11]=s("h4",{id:"local-distributed-模式",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#local-distributed-模式"},[s("span",null,"LOCAL_DISTRIBUTED 模式")])],-1)),e(n,{code:"eJyFU01v0zAYvvMronHZDuVDfIghNGkrH0MqlwKnqIc0cdqINCmOc0DqhbGODq20UreKQiVUqQgOrBQxtqx0/JraSf/FHLtpna3TfLOf532f531s56BSzEsv1q5IdDlulu8XHhoOgkbWRUBLKwikjIKBAJRwZQt77/CwNm7Vyd+3uPVjgRWGSzMgUJFhW2G36ems5bhc9U96fq/j17dmVeFK2pZu5JKKmgfyhDVs4P1PD7Lw+goFVRdCYKF1xck/U4qZWO3Lokb98Q4y+XJAmn3eYkYDljbPD2n/xO0+HyTuJ2Wripm0XYuOLHPa6F/X394Jeh2y16dTM2eryC4Y6lPKygEYd0X9OG4ByOSwEhwc82I+zepz0qiOTtqX2ksDzXDmuVtTkJp/ApBMto/H72vBxyNcawoSKVcJNj9T25dKjFtVf/Dd32/6e9/iGo8gtOG6YmkmkPFwA3se7m7Se4tP+VgxzayivpJ5o5E3ILv/g85OXDhmIA1eu8BBi3Lw64j83sgsSYnEivgAGEvYM1y8EEYQD6IOYeBcZLIJgRIPBpfLweGfEpV3ihQEizJuVPFgN7N0QcHIq7KCKGxGizZMUYiIqwoHrBHPrTRNaS6JVOr4w9fS+QmjKqYV2eZC4pOXEtfCLuzdl87lOIfplcet7hk9/vfRG+ppcj+Sbpjm/avgpn5H12MwNzLB1Xvgrros4FPXHNd1fVm9LeBR0FP4FrghwNOAY/gpK4a5fA=="}),a[12]||(a[12]=s("h3",{id:"_6-3-多级限流架构",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_6-3-多级限流架构"},[s("span",null,"6.3 多级限流架构")])],-1)),e(n,{code:"eJyNU01L40AYvvsrQveye2jdmVhpl0XYXqRQ2Oy6t+AhTWdq2NB0p+mKNxUEFb+uflxUREFRehBF/Dmm1ZN/wUnemTYxGXWg0LzP8z7PvE/eUNebt+cs5mt/KmMaP7/Jvy7p+J/N4PKov3ozOL96vLrp95Znv4xFeKdbbzKrPafVrAXCkJkbXFw83C4GveXn+71g5SzoLT7t7vSvl3KzET88065Xt1xzuvaz8qMG6Pc6G59CX/nRfhkzQCWtRpYHBo+7DfDoH2wG64eDu9OUzQxh/x2bILPbISzPf+FTZIQTPjEuNj3WeEXWVWTdbDOv0bX9BL34kRl0kdOamGHrJNg+zpqh2vIJo1Y4Rc5qO+Ou13Ra0ie0yeLyhEIuI02nw0tyChWdXyakR5MP30OMrJhhIpoh2N+HGapG5v0NZKIyLqDJUgEVuLAwSAZaNXCChRQsPcHCKdbwphXL/ssfEF/bnS2+s7AkfGdjIH4L1FNg/GvQ8vkpscVQh/9RWW6doo4VdR2EZHcEjV7+GxgISvUkJkRHOgAboDeSEGWQGnWLslQxoF1mK4rQLDMVRWiVWYrt8RdcMkyQOq777RNBtEhpDBbBAEqp3RCSgA4TkDgt2xNpHL+D6yo8FhQw7BKZtMtZDOmhZkiXFEMGKDMo0SLJwKWDCpf6An8BA+PdeQ=="}),a[13]||(a[13]=s("h3",{id:"_6-4-local-distributed-模式的高性能架构",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_6-4-local-distributed-模式的高性能架构"},[s("span",null,"6.4 LOCAL_DISTRIBUTED 模式的高性能架构")])],-1)),e(n,{code:"eJx9VMtu00AU3ecrrCCWBTs8hCNUiSJASAiV0p3FwnXGrVGaVLa76C5tgaRAkz54pQpBRUVBokoTtfSRqOrPZMb2X+Dc64xdk8ar2Ofcc8+5dyazprowJ0xPJAT/sRZn8D3pHpyw9gr7u+wVK7T0jp6uJoHRf6ZNVdcNTaHNuld9i5z7M+bNcUkUReHF5MtXQCW5TCKmymr7tNbyqht+EW2vhJLP8pqafZhfzNnEVJDV6+45ax/d5i773KLV39DggZ2fN7SnPmuWmNiFV0+qlhWUsuOSe3SWFmS0A6VO59BpbDmdBt1ep51PseJH8wv2koIte6fr7vFhWvDTjAwzRTKGxdbO/PRu+YRWvoRxJlRbm3tCbCUKozqYYQcVSWT7uzhlyf8FYqEpEIBEWMtKG/T9j5gnTpwir4lmB1S613aPfqWF0ead7jar10LHj40cH2HB6Za8wo57URyyVU4OmiKdfdhyut+BPqxvcGKEsbHxS6sGMPohZPS9jIBhYSjO6YDyICEGXAAHewFs8BIivOx/CNNiQ84dnifCDx1F6y17KUv4THQjm01fI5J+R9cj8KXYyNF1/RYR4xwwggTtHrmryRECz8EFZO12BOfDukog4p1raJlMCoM8z9tEUoJbjZeOFRru6jmrL3t/vsFxkOXreMpjFzCJR6QvkVLwLrnNC+9r0/u56ZSLvfMylFP/76e16Ys4O2+QBGJ+dXz3N/xRg6HYBgffU4l/WfXgIg=="}),a[14]||(a[14]=s("h3",{id:"_6-5-配置同步架构",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_6-5-配置同步架构"},[s("span",null,"6.5 配置同步架构")])],-1)),e(n,{code:"eJydkt1KwlAAx+97inMdTNnW54hBNthNXVQPIEuXDHLZnIR3iRgjsiZmKBoSFHiRNugDscSX8Zyxt+h4jpPFQKldjf1//4+zLaue5VQ9oUqakjKU9BLAV0YxTC2hZRTdBNvJtKYDJQvc3qNrX8JKPYTsqLqpGoQZVmDpbdzvwlExhEmxCbKXP9zfDWkHalLLTmRyE5JldqLJiqmeK3mGDetcUOfCOh/U+SUCkJMxokjnC4CNAGg14dcgiprv6N7xGjb6KHilsjvsEQMFsUOKCYCLgPHoAXbr0HJQzUHlHhxUCSbFmEAq73PIsuFVm1bPkshxBbCCq+1r1H2mbTiSCFtHRlQ08Or4iZbWzHjiVD/WUsIyySBEsGnVD5nXtIah2wrsF2kTPSn6tFDhddbGkDaGtjG5TBI/o2m0UxRlVgDrEYBuOt5Fgbp/69wCnQ/rBJDZafoGVum21gtsOXQtWYj6Ja/xRD8ObHTc7yp+udTMTav/Zeanu/5q9ndjO/mjBLAZAdTl3rVRzfK3LQD4OcAPwRqKwg=="}),a[15]||(a[15]=i(`<h2 id="三、性能分析" tabindex="-1"><a class="header-anchor" href="#三、性能分析"><span>三、性能分析</span></a></h2><h3 id="_7-1-限流模式性能对比" tabindex="-1"><a class="header-anchor" href="#_7-1-限流模式性能对比"><span>7.1 限流模式性能对比</span></a></h3><table><thead><tr><th>限流模式</th><th>响应时间</th><th>吞吐量</th><th>Redis 访问</th><th>准确性</th><th>适用场景</th></tr></thead><tbody><tr><td><strong>DISTRIBUTED</strong></td><td>毫秒级</td><td>中等</td><td>每次请求</td><td>高（分布式）</td><td>中等并发、精度要求高</td></tr><tr><td><strong>LOCAL_DISTRIBUTED</strong></td><td>纳秒级</td><td>极高</td><td>批量访问</td><td>高（分布式）</td><td>高并发、性能要求极高</td></tr></tbody></table><h3 id="_7-2-local-distributed-模式的性能优势" tabindex="-1"><a class="header-anchor" href="#_7-2-local-distributed-模式的性能优势"><span>7.2 LOCAL_DISTRIBUTED 模式的性能优势</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>假设：</span></span>
<span class="line"><span>- 配置限流：1000 QPS</span></span>
<span class="line"><span>- 实际流量：1000 QPS</span></span>
<span class="line"><span>- 批量大小：100</span></span>
<span class="line"><span></span></span>
<span class="line"><span>DISTRIBUTED 模式（仅 Redis）：</span></span>
<span class="line"><span>  Redis 请求数：1000 次/秒</span></span>
<span class="line"><span>  平均延迟：毫秒级</span></span>
<span class="line"><span>  Redis 压力：高</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOCAL_DISTRIBUTED 模式：</span></span>
<span class="line"><span>  本地消费：900 次/秒（纳秒级）</span></span>
<span class="line"><span>  Redis 请求数：10 次/秒（批量获取）</span></span>
<span class="line"><span>  平均延迟：纳秒级（99% 请求）</span></span>
<span class="line"><span>  Redis 压力：降低 99%</span></span>
<span class="line"><span>  性能提升：100 倍以上</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-降级策略的可用性保障" tabindex="-1"><a class="header-anchor" href="#_7-3-降级策略的可用性保障"><span>7.3 降级策略的可用性保障</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>DISTRIBUTED 模式：</span></span>
<span class="line"><span>  正常情况：Redis 限流 → 业务处理</span></span>
<span class="line"><span>  Redis 异常：降级放行 → 业务处理</span></span>
<span class="line"><span>  保障：服务不中断</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOCAL_DISTRIBUTED 模式：</span></span>
<span class="line"><span>  正常情况：本地消费 → 业务处理</span></span>
<span class="line"><span>  本地令牌不足：批量获取 → 本地消费 → 业务处理</span></span>
<span class="line"><span>  Redis 异常：降级放行 → 业务处理</span></span>
<span class="line"><span>  保障：</span></span>
<span class="line"><span>    - 99% 请求不受 Redis 影响</span></span>
<span class="line"><span>    - 本地限流仍生效</span></span>
<span class="line"><span>    - 避免限流器成为单点故障</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-选择建议" tabindex="-1"><a class="header-anchor" href="#_7-4-选择建议"><span>7.4 选择建议</span></a></h3><p><strong>使用 DISTRIBUTED 模式（默认）：</strong></p><ul><li>对限流精度要求高</li><li>并发量中等（&lt; 10000 QPS）</li><li>对延迟不敏感</li></ul><p><strong>使用 LOCAL_DISTRIBUTED 模式：</strong></p><ul><li>对性能要求极高</li><li>并发量大（&gt; 10000 QPS）</li><li>可以接受极小的精度偏差（批量大小范围内）</li></ul>`,12))])}const u=d(r,[["render",o]]),E=JSON.parse('{"path":"/projects/gateway/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E6%A0%B8%E5%BF%83%E6%9C%8D%E5%8A%A1/10.3%20%E5%88%86%E5%B8%83%E5%BC%8F%E9%99%90%E6%B5%81%E5%99%A8-%E6%B5%81%E7%A8%8B%E5%9B%BE%E4%B8%8E%E6%9E%B6%E6%9E%84%E5%9B%BE.html","title":"分布式限流器 - 流程图与架构图","lang":"zh-CN","frontmatter":{"description":"分布式限流器 - 流程图与架构图 一、流程图 5.1 限流判断总流程 DISTRIBUTED 模式（默认） LOCAL_DISTRIBUTED 模式（高性能） 5.2 请求处理链中的限流流程 5.3 令牌桶算法执行流程（DISTRIBUTED 模式） 5.4 滑动窗口算法执行流程（DISTRIBUTED 模式） 5.5 批量获取令牌流程（LOCAL_D...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"分布式限流器 - 流程图与架构图\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-16T12:00:30.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"CodeLong\\",\\"url\\":\\"codelong.top\\"}]}"],["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/projects/gateway/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E6%A0%B8%E5%BF%83%E6%9C%8D%E5%8A%A1/10.3%20%E5%88%86%E5%B8%83%E5%BC%8F%E9%99%90%E6%B5%81%E5%99%A8-%E6%B5%81%E7%A8%8B%E5%9B%BE%E4%B8%8E%E6%9E%B6%E6%9E%84%E5%9B%BE.html"}],["meta",{"property":"og:site_name","content":"CodeLong"}],["meta",{"property":"og:title","content":"分布式限流器 - 流程图与架构图"}],["meta",{"property":"og:description","content":"分布式限流器 - 流程图与架构图 一、流程图 5.1 限流判断总流程 DISTRIBUTED 模式（默认） LOCAL_DISTRIBUTED 模式（高性能） 5.2 请求处理链中的限流流程 5.3 令牌桶算法执行流程（DISTRIBUTED 模式） 5.4 滑动窗口算法执行流程（DISTRIBUTED 模式） 5.5 批量获取令牌流程（LOCAL_D..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-16T12:00:30.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-16T12:00:30.000Z"}]]},"git":{"createdTime":1763044581000,"updatedTime":1765886430000,"contributors":[{"name":"1973034392","username":"1973034392","email":"1973034392@qq.com","commits":2,"url":"https://github.com/1973034392"},{"name":"longhao08","username":"longhao08","email":"longhao08@meitua.com","commits":1,"url":"https://github.com/longhao08"}]},"readingTime":{"minutes":8.41,"words":2522},"filePathRelative":"projects/gateway/项目文档/核心服务/10.3 分布式限流器-流程图与架构图.md","autoDesc":true}');export{u as comp,E as data};
